/*!
* app.js Javascript Library v0.9.2
*
* Copyright (c) 2011 Fabian Irsara
* Licensed under the GPL Version 2 licenses.
*
* Provides prototypal inheritence of self-defined Classes
* Parsing Classes
* Requiring, extending Classes
* including Plugins and Stylesheets Dynamically
*/if(!window)var window=function(){return this}();var app,ClassParser;app=function(a){"use strict";var b=.92,c="app",d=!1,e=!1,f="",g=[],h={},i=0,j=function(){this.self=this;this.priv={}},k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E=a.document;s=function(a){this.className="";this.classConstructor=null;this.superClass="Class";this.imports=[];this.plugins=[];this.callback=null;for(var b in a)b!=="indexOf"&&(this[b]=a[b])};t=function(a){g[a]=!0};u=function(a,b){B(a,b,null,!0)};v=function(a,b){a=a.trim();!a.endsWith(".css")&&f!==""&&(a=f+a+".css");if(!e){a.indexOf("?")!==-1?a+="&":a+="?";a+="t="+(new Date).getTime()}if(l("link",{"data-includemodule":a})){b&&b.call(app,null);return}m("link",{"class":"style-includemodule","data-includemodule":a,rel:"stylesheet",type:"text/css",charset:"utf-8",href:a})};w=function(a,b,c){a instanceof Array||(a=[a]);b===null&&(b=!0);c===null&&(c=!1);var d,e,f,i;for(f=0;f<a.length;f++){e=a[f].trim();if(g[e]===!0)continue;d=l("script",{"data-includemodule":e});d&&d.parentNode.removeChild(d);if(!h[e])continue;if(b&&h[e].imports)for(i=0;i<h[e].imports.length;i++)w(h[e].imports[i]);if(c&&h[e].plugins)for(i=0;i<h[e].plugins.length;i++)w(h[e].plugins[i]);h[e]=null}};x=function(a,b,c){a instanceof Array||(a=[a]);var d,e,f=-1;d=function(){f++;a[f]&&B(a[f],d,e)};e=function(){c&&c(a[f]);h[a[f]]||(h[a[f]]={});h[a[f]].ready=!0;d()};d();b&&n(a,b)};D=function(a){h[a.className]||(h[a.className]=a);for(var b=0;b<h[a.className].plugins.length;b++)h[a.className].imports.push(h[a.className].plugins[b]);h[a.className].loadID=i;h[a.className].size=a.imports.length;h[a.className].size>0&&x(h[a.className].imports);i++;p(a.className)};var F=Object.prototype.hasOwnProperty;z=function(a,b){function f(){this.constructor=a;this.self=this}var c={prototypes:{},statics:{}},d;for(d in a)d!=="indexOf"&&(c.statics[d]=a[d]);for(d in a.prototype)d!=="indexOf"&&(c.prototypes[d]=a.prototype[d]);for(var e in b)F.call(b,e)&&(a[e]=b[e]);f.prototype=b.prototype;a.prototype=new f;a.__super__=b.prototype;for(d in c.statics)d!=="indexOf"&&(a[d]=c.statics[d]);for(d in c.prototypes)d!=="indexOf"&&(a.prototype[d]=c.prototypes[d]);return a};y=function(a,b,c){var d=h[a].classConstructor,e=h[b].classConstructor;z(d,e);c&&c.call(this);return d};p=function(b){function c(){var d=h[b];if(!d)return;d.ready=!0;for(var e=0;e<d.size;e++)h[d.imports[e]]?h[d.imports[e]].loadID>d.loadID&&h[d.imports[e]].ready!==!0&&(d.ready=!1):d.ready=!1;if(d.ready===!0&&h[b]&&h[d.superClass]){y(b,d.superClass);q(d.className);d.callback&&d.callback.call(app,null)}else a.setTimeout(c,10)}c()};A=function(a){try{if(h[a].ready===!0&&h[h[a].superClass].ready===!0)return!0}catch(b){}return!1};n=function(b,c){function d(){for(var e=0;e<b.length;e++){if(A(b[e])===!1)return a.setTimeout(d,25);c&&c.call(app,null)}}d()};o=function(a,b){var c,d=a.length;for(c=0;c<d;c++)if(a[c]===b)return!0;return!1};B=function(a,b,d,h,i){a=a.trim();var j=a,n=l("script",{"data-includemodule":j});if(n)if(h)n.parentNode.removeChild(n);else if(b)return b.call(app,null);if(g[j]===!0&&b)return b.call(app,null);var o=m("script",{"class":"script-includemodule","data-includemodule":j,type:"text/javascript"});i||(i=!0);!a.endsWith(".js")&&f!==""&&(a=f+a+".js");if(!e){a.indexOf("?")!==-1?a+="&":a+="?";a+="t="+(new Date).getTime()}k("GET",a,function(a){if(h===!0){i&&(o.text=a);b&&b.call(app,a)}else if(a.indexOf(" class ")!==-1){b&&b.call(app,a);o.text=C(a)}else{if(i){o.text=a;a.indexOf(c+".defineClass(")===-1&&q(j)}b&&b.call(app,a)}},function(a){o.parentNode.removeChild(o);d&&d.call(app,a)})};q=function(a){h[a]||(h[a]={});h[a].ready=!0};q("SuperClass");h.SuperClass.classConstructor=j;m=function(a,b){var c=E.createElement(a);for(var d in b)d!=="indexOf"&&c.setAttribute(d,b[d]);E.getElementsByTagName("head").item(0).appendChild(c);return c};l=function(a,b){var c=E.getElementsByTagName(a),d=!1,e;for(var f=0;f<c.length;f++){d=!0;for(var g in b)if(g!=="indexOf"){e=c[f].getAttribute(g);if(!e||e.toString()!==b[g].toString())d=!1}if(d===!0)return c[f]}return!1};k=function(b,c,d,e){var f=!1;if(a.XMLHttpRequest&&!a.ActiveXObject)try{f=new XMLHttpRequest}catch(g){f=!1}else if(a.ActiveXObject)try{f=new a.ActiveXObject("Msxml2.XMLHTTP")}catch(h){try{f=new a.ActiveXObject("Microsoft.XMLHTTP")}catch(i){f=!1}}if(!f){e("Your Browser does not Support Ajax Requests");return!1}f.onreadystatechange=function(){if(f.readyState.toString()==="4"){f.status.toString()==="200"||f.status.toString()==="0"?d(f.responseText):e("There was a problem retrieving the XML data:\n"+f.statusText);f=null}};f.open(b,c,!0);f.send()};C=function(a){a instanceof Array||(a=[a]);var b="";for(var c=0;c<a.length;c++)b+=r(a[c]);return b};r=function(a){var b=new ClassParser(a);return b.parse()};if(!a.console||!a.console.log){a.console={};a.console.log=function(){}}Function.prototype.bind||(Function.prototype.bind=function(){var a=this,b=Array.prototype.slice.call(arguments),c=b.shift();return function(){return a.apply(c,b.concat(Array.prototype.slice.call(arguments)))}});String.prototype.trim=function(){var a=this.replace(/^\s\s*/,""),b=/\s/,c=a.length;do c--;while(b.test(a.charAt(c)));return a.slice(0,c+1)};String.prototype.endsWith=function(a){return this.substring(this.length-a.length)===a};if(E){var G=E.getElementsByTagName("script"),H=null,I,J,K;for(var L=0;L<G.length;L++){I=G[L].getAttribute("data-cache");J=G[L].getAttribute("data-minify");K=G[L].getAttribute("data-dir");I&&I.toString().toLowerCase()==="true"&&(e=!0);J&&J.toString().toLowerCase()==="true"&&(d=!0);K&&(f=G[L].getAttribute("data-dir"));if(G[L].getAttribute("data-main")){H=G[L].getAttribute("data-main");G[L].getAttribute("data-dir")?f=G[L].getAttribute("data-dir"):f=H.substring(0,H.lastIndexOf("/")+1);H.substring(H.length-3)!==".js"&&H.indexOf(f)===0&&(H=H.substring(f.length))}}H&&x(H)}var M={VERSION:b,NAME:c,MINIFY_JS:d,CACHE:e,BASE_PATH:f,Class:s,ignore:t,remove:w,js:x,require:x,requires:x,css:v,style:v,run:u,include:B,extendClass:y,__extend:z,hasClass:A,defineClass:D,parseClass:C,parse:C};return M}(window);ClassParser=function(a,b){function c(a){a=a.replace(new RegExp("\\$","g"),"__DOLLAR__");this.string=a;this.pkg=null;this.imports=[];this.includes=[];this.styles=[];this.constructorFct=null;this.className=null;this.superClass=null;this.qualifiedClassName=null;this.publicFct=[];this.privateFct=[];this.privateVar=[];this.publicVar=[];this.superVar=[];this.publicStaticFct=[];this.publicStaticVar=[];this.privateStaticFct=[];this.privateStaticVar=[];this.string=this.string.replace(/([\/]{2}[^\n]*)|([\n]{1,}[\/]{2}[^\n]*)/g,"");this.string=this.string.replace(/\/\*([\s\S]*?)\*\//g,"");this.string=this.string.replace(/static public/g,"public static");this.string=this.string.replace(/static private/g,"private static");this.string=this.string.replace(/const /g,"var ");this.isStaticClass=this.string.indexOf("public static class")>=0;this.hasSuperClass=this.string.indexOf(" extends ")>=0;this.hasPackage=this.string.indexOf("package ")>=0;var b,c=this.isStaticClass===!0?"public static class":"public class";this.pkg=this.fetchResource("#package");while(this.string.indexOf("#import")>=0)this.imports.push(this.fetchResource("#import").replace(/\./g,"/"));while(this.string.indexOf("#include")>=0)this.includes.push(this.fetchResource("#include"));while(this.string.indexOf("#style")>=0)this.styles.push(this.fetchResource("#style"));var d="",e="";while(this.string.indexOf("#use")>=0){e=this.fetchResource("#use");d=e.substring(e.lastIndexOf("."));this.string=this.string.replace(new RegExp("new?"+d,"g"),"new "+e);this.string=this.string.replace(new RegExp("extends?"+d,"g"),"extends "+e)}this.string=this.string.trim();this.className=this.string.substring(0,this.string.indexOf(this.hasSuperClass?"extends":"{")).replace(c,"").trim().replace(/\n/g,"");this.superClass=this.string.substring(this.string.indexOf("extends"),this.string.indexOf("{")).replace("extends","").trim();this.qualifiedClassName=this.hasPackage?this.pkg+"."+this.className:this.className;this.hasSuperClass||(this.superClass="SuperClass");this.string=this.string.substring(this.string.indexOf("{")+1,this.string.lastIndexOf("}"));this.constructorFct=this.parseFunction("public",this.className);var f=this.constructorFct.found===!0&&this.hasSuperClass===!0;while(this.string.indexOf("public static var ")>=0)this.publicStaticVar.push(this.parseVar("public static"));while(this.string.indexOf("public static function ")>=0)this.publicStaticFct.push(this.parseFunction("public static"));while(this.string.indexOf("private static var ")>=0)this.privateStaticVar.push(this.parseVar("private static"));while(this.string.indexOf("private static function ")>=0)this.privateStaticFct.push(this.parseFunction("private static"));while(this.string.indexOf("public var ")>=0)this.publicVar.push(this.parseVar("public"));while(this.string.indexOf("private var ")>=0)this.privateVar.push(this.parseVar("private"));while(this.string.indexOf("super var ")>=0)this.superVar.push(this.parseVar("super"));while(this.string.indexOf("public function ")>=0)this.publicFct.push(this.parseFunction("public"));while(this.string.indexOf("private function ")>=0)this.privateFct.push(this.parseFunction("private"));this.string=this.string.trim().replace(/\n/g,"");if(this.string!=="")throw new Error("Error while parsing Class  > "+this.qualifiedClassName+" <");return this}"use strict";c.prototype.toString=function(){return this.string};c.prototype.valueOf=function(){return this.string};c.prototype.parseFunction=function(a,b){var c={};c.body="";c.args="";c.name="";c.str="";c.found=!1;var d=a+" function",e=this.string.indexOf(d+(b?" "+b:""));if(e===-1)return c;var f=this.string.substring(e),g=f.substring(20).indexOf("public ")+20,h=f.substring(20).indexOf("private ")+20,i=f.substring(20).indexOf("static ")+20;g<=20&&(g=Number.MAX_VALUE||Math.pow(2,50));h<=20&&(h=Number.MAX_VALUE||Math.pow(2,50));i<=20&&(i=Number.MAX_VALUE||Math.pow(2,50));var j=Math.min(g,h,i,f.lastIndexOf("}")+1);f=f.substring(0,j);c.str=f;c.args=f.substring(f.indexOf("(")+1,f.indexOf(")")).trim();c.body=f.substring(f.indexOf("{")+1,f.lastIndexOf("}"));c.name=f.substring(0,f.indexOf("(")).replace(d,"").trim();c.found=!0;this.string=this.string.replace(c.str,"");return c};c.prototype.parseVar=function(a,b){var c={};c.value="";c.name="";c.str="";c.found=!1;var d=a+" var",e=this.string.indexOf(d+(b?" "+b:"")),f=this.string.substring(e),g=f.indexOf(";")+1;if(e===-1)return c;var h=f.substring(0,g),i=h.indexOf("=")!==-1;c.str=h;c.name=(i===!1?h:h.substring(0,h.indexOf("="))).replace("=","").replace(";","").replace(d,"").trim();c.value=(i===!1?"":h.substring(h.indexOf("="))).replace("=","").replace(";","").trim();c.found=!0;c.value===""&&(c.value="null");this.string=this.string.replace(c.str,"");return c};c.prototype.fetchResource=function(a){var b=this.string.indexOf(a);if(b===-1)return"";var c=this.string.substring(b);c=c.substring(0,c.indexOf(";")+1);this.string=this.string.replace(c,"");return c.replace(a,"").replace(";","").replace(/\'/g,"").replace(/\"/g,"").trim()};c.prototype.parse=function(){var c,d,e="",f=this,g=f.privateVar.concat(f.privateFct),h=f.publicVar.concat(f.publicFct),i=[],j=[];for(c=0;c<f.imports.length;c++)i.push("'"+f.imports[c].replace(/\./g,"/")+"'");for(c=0;c<f.includes.length;c++)i.push("'"+f.includes[c]+"'");if(f.pkg!==""){var k=f.pkg.split("."),l="";for(c=0;c<k.length;c++){c!==0&&(l+=".");l+=k[c];e+="if (!"+l+") "+(c===0?"var ":"")+l+" = {};\n"}e+="\n"+f.pkg+"."}else e+="var ";e+=f.className+" = (function () {";e+='"use strict";';for(c=0;c<f.privateStaticFct.length;c++){e+="var "+f.privateStaticFct[c].name+" = function("+f.privateStaticFct[c].args+") {";e+=f.privateStaticFct[c].body;e+="};"}for(c=0;c<f.privateStaticVar.length;c++)e+="var "+f.privateStaticVar[c].name+" = "+f.privateStaticVar[c].value+";";for(c=0;c<f.publicVar.length;c++)f.publicVar[c].value!=="null"&&(e+=f.className+".prototype."+f.publicVar[c].name+" = "+f.publicVar[c].value+";");e+="function "+f.className+"("+f.constructorFct.args+") {";e+=f.className+".__super__.constructor.apply(this, arguments);";e+="var self = this.self;";e+="var priv = self.priv;";f.isStaticClass&&(e+=f.className+".instance = this;");for(c=0;c<f.privateVar.length;c++)e+="priv."+f.privateVar[c].name+" = "+f.privateVar[c].value+";";for(c=0;c<f.privateFct.length;c++){e+="priv."+f.privateFct[c].name+" = function("+f.privateFct[c].args+") {";e+=f.privateFct[c].body;e+="};"}e+=f.constructorFct.body;e+="return this;";e+="}";for(c=0;c<f.publicFct.length;c++){e+=f.className+".prototype."+f.publicFct[c].name+" = function("+f.publicFct[c].args+"){";e+="var self = this.self;";e+="var priv = this.priv;";e+=f.publicFct[c].body;e+="};"}for(c=0;c<f.publicStaticVar.length;c++)e+=f.className+"."+f.publicStaticVar[c].name+" = "+f.publicStaticVar[c].value+";";for(c=0;c<f.publicStaticFct.length;c++){e+=f.className+"."+f.publicStaticFct[c].name+" = function("+f.publicStaticFct[c].args+"){";e+=f.publicStaticFct[c].body;e+="};"}e=e.replace(/\s\(/g,"(");e=e.replace(/\(\s\)/g,"()");for(c=0;c<f.publicFct.length;c++){e=e.replace(new RegExp("this."+f.publicFct[c].name+"\\(","g"),"self."+f.publicFct[c].name+".call(self,");e=e.replace(new RegExp("\\bthis."+f.publicFct[c].name+"\\b","g"),"self."+f.publicFct[c].name+".bind(self)")}for(c=0;c<f.superVar.length;c++)e=e.replace(new RegExp("super."+f.superVar[c].name,"g"),"self."+f.superVar[c].name);for(c=0;c<f.publicVar.length;c++)e=e.replace(new RegExp("this."+f.publicVar[c].name,"g"),"self."+f.publicVar[c].name);for(c=0;c<g.length;c++)e=e.replace(new RegExp("this."+g[c].name,"g"),"self.priv."+g[c].name);for(c=0;c<f.styles.length;c++)e+=a.NAME+".style('"+f.styles[c]+"');";e+=a.NAME+".defineClass({";e+="className: '"+f.qualifiedClassName.replace(/\./g,"/")+"'";e+=", classConstructor: "+f.className;e+=", superClass: '"+f.superClass.replace(/\./g,"/")+"'";e+=", imports: ["+i.join(", ")+"]";e+=", plugins: ["+j.join(", ")+"]";f.isStaticClass&&(e+=",callback: function(){ new "+f.className+"(); }");e+="});\n";e+="return "+f.className+";";e+="})();";e=e.replace(/super\s\(/g,"super(");e=e.replace(/super\(\s\)/g,"super()");e=e.replace(/super\(\);/g,"");e=e.replace(/parent\./g,"super.");e=e.replace(/super\./g,f.className+".__super__.");e=e.replace(/(__super__\.)+([\s\S]*?\()/g,"$&.call(self,");e=e.replace(/apply\(\.call\(self,/g,"apply(");e=e.replace(/\(\.call\(self/g,".call(self");e=e.replace(/function\.call\(self,/g,"function(");e=e.replace(/for\.call\(self,/g,"for (");e=e.replace(/self,\)/g,"self)");e=e.replace(/__DOLLAR__/g,"$");e=e.replace(/dispatchEvent/g,"triggerEvent");e=e.replace(/addEventListener/g,"signalConnect");e=e.replace(/removeEventListener/g,"unconnectSignal");if(a.MINIFY_JS){e=e.replace(/function /g,";function ");e=e.replace(/\n|\t/g,"");while(e.indexOf(";;")>=0)e=e.replace(/;;/g,";")}else try{e=b.js_beautify(e,{indent_size:2,indent_char:" ",preserve_newlines:!1})}catch(m){}return e};return c}(app,window);try{module.exports={app:app,parser:ClassParser}}catch(e){};